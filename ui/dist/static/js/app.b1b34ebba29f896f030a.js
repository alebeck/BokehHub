webpackJsonp([1],{"2GZY":function(t,e){},"3XOR":function(t,e){},"4/hK":function(t,e){},D4uH:function(t,e,n){"use strict";var o=n("bOdI"),i=n.n(o),s={},a={name:"fa-icon",props:{name:{type:String,validator:function(t){return!t||t in s||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return i()({"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse},this.$options.name,!0)},icon:function(){return this.name?s[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,n=t.height;return Math.max(e,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,n,o){var i="fa-"+(r++).toString(16);return e[o]=i,' id="'+i+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,n,o,i){var s=n||i;return s&&e[s]?"#"+e[s]:t}),t}},mounted:function(){var t=this;if(this.name||0!==this.$children.length){if(!this.icon){var e=0,n=0;this.$children.forEach(function(o){o.outerScale=t.normalizedScale,e=Math.max(e,o.width),n=Math.max(n,o.height)}),this.childrenWidth=e,this.childrenHeight=n,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(n-t.height)/2})}}else console.warn('Invalid prop: prop "name" is required.')},register:function(t){for(var e in t){var n=t[e];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),s[e]=n}},icons:s},r=870711;var l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,o){return n("path",t._b({key:"path-"+o},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,o){return n("polygon",t._b({key:"polygon-"+o},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[n("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},staticRenderFns:[]};var c=n("VU/8")(a,l,!1,function(t){n("jSVj")},null,null);e.a=c.exports},McIl:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view"),this._v(" "),e("vue-progress-bar")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},i,!1,function(t){n("kcWO")},null,null).exports,a=n("/ocq"),r=n("NYxO"),l=n("v/L+"),c=n.n(l),u=n("lbHh"),d=n.n(u);o.default.use(r.a);var p=new c.a({restoreState:function(t,e){return d.a.getJSON(t)},saveState:function(t,e,n){return d.a.set(t,e,{expires:3})}}),h=new r.a.Store({state:{user:null,lastUsername:"",settings:{}},mutations:{authenticate:function(t,e){t.user=e,t.lastUsername=e.name},deauthenticate:function(t){t.user=null},setLastUsername:function(t,e){t.lastUsername=e},setSettings:function(t,e){t.settings=e}},getters:{isAuth:function(t){return null!=t.user},isAdmin:function(t){return t.user.admin},getUser:function(t){return t.user},getLastUsername:function(t){return t.lastUsername},getSettings:function(t){return t.settings}},plugins:[p.plugin]}),f=(n("15Ef"),n("mtWM")),g=n.n(f),m={name:"Navbar",methods:{logout:function(){var t=this;g.a.get("/logout").then(function(e){if(e.data.success)return t.$store.commit("deauthenticate"),void t.$router.push("/login");t.$message.error("Logout could not be performed")})}},computed:{username:function(){return this.$store.getters.getUser.name},isAdmin:function(){return this.$store.getters.getUser.admin}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"navbar"}},[n("el-menu",{staticClass:"navbar",attrs:{mode:"horizontal"}},[n("div",{staticClass:"left-title"},[t._v("\n\t\t\tBokehHub\n\t\t")]),t._v(" "),n("div",{staticClass:"left-menu"},[n("router-link",{staticClass:"left-menu-item nav-link",attrs:{tag:"div",to:"/plots"}},[t._v("Plots")]),t._v(" "),n("router-link",{staticClass:"left-menu-item nav-link",attrs:{tag:"div",to:"/data"}},[t._v("Data")]),t._v(" "),t.isAdmin?n("router-link",{staticClass:"left-menu-item nav-link",attrs:{tag:"div",to:"/settings"}},[t._v("Settings")]):t._e()],1),t._v(" "),n("div",{staticClass:"right-menu"},[n("div",{staticClass:"right-menu-item"},[n("el-popover",{attrs:{placement:"bottom",width:"auto"}},[n("p",{staticStyle:{"text-align":"center","margin-top":"0","margin-bottom":"8px"}},[t._v("Logged in as "+t._s(t.username))]),t._v(" "),n("div",{staticStyle:{"text-align":"center",margin:"0"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.logout()}}},[t._v("Logout")])],1),t._v(" "),n("el-button",{staticStyle:{color:"inherit"},attrs:{slot:"reference",type:"text"},slot:"reference"},[n("icon",{staticStyle:{"margin-bottom":"-5px"},attrs:{name:"user",scale:"1.3"}}),t._v(" "),n("span",{staticStyle:{"margin-left":"3px"}},[t._v(t._s(t.username))])],1)],1)],1)])])],1)},staticRenderFns:[]};var b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"app-main",staticStyle:{"min-height":"100%"}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("keep-alive",{attrs:{include:"Plots"}},[e("router-view")],1)],1)],1)},staticRenderFns:[]};var w={name:"Layout",components:{Navbar:n("VU/8")(m,v,!1,function(t){n("McIl")},"data-v-139e9325",null).exports,AppMain:n("VU/8")({name:"AppMain"},b,!1,function(t){n("2GZY")},"data-v-a20d0e72",null).exports}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-wrapper"},[e("navbar",{attrs:{id:"navbar"}}),this._v(" "),e("app-main",{attrs:{id:"app-main"}})],1)},staticRenderFns:[]};var k=n("VU/8")(w,_,!1,function(t){n("cIBW")},"data-v-96d26d7e",null).exports,y={name:"Plot",mounted:function(){var t=document.createElement("script");t.src=this.hostname+"/script/"+this.plot.id+"?token=dontneedone&elemid="+this.elemId,t.id=this.elemId,t.async=!1,document.getElementById("plot").appendChild(t)},props:{plot:Object},computed:{elemId:function(){return Math.random().toString(36).substring(2,15)},hostname:function(){return this.$store.getters.getSettings.hostname}}},x={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"plot-container"},[e("div",{attrs:{id:"plot"}})])])}]};var S=n("VU/8")(y,x,!1,function(t){n("Xk2m")},"data-v-cbe80062",null).exports,D={methods:{deauthenticate:function(){this.$store.commit("deauthenticate"),this.$router.push("/login"),console.log("Deauthenticated.")}}},C={methods:{getStatus:function(t){switch(t.status){case"ready":return{positive:"true",title:"Ready"};case"pending":return{intermediary:"true",pulse:"true",title:"In progress"};case"error":return{negative:"true",title:t.errmsg?"Error: "+t.errmsg:"Error"};default:return{negative:"true"}}}}},$={methods:{getCursor:function(t){switch(t){case"pending":return"not-allowed";default:return"pointer"}}}},E=n("E5Az"),T=(n("4/hK"),n("tWbI"),n("ezqs"),n("zxa9"),{name:"Plots",mixins:[D,C,$],data:function(){return{plots:[],tokens:[],dialogTitle:"",dialogPlot:"",dialogVisible:!1,editDialogVisible:!1,createDialogVisible:!1,embedDialogVisible:!1,tokenDialogVisible:!1,createTokenDialogVisible:!1,tokenNameInput:"",tokenDialogId:"",plotKey:"1",code:"",tagCode:"",scriptCode:"",emptyText:"You have no plots running at the moment.",plotId:null,cmOptions:{tabSize:4,indentUnit:4,mode:"text/x-python",lineNumbers:!0,line:!0,viewportMargin:1/0,extraKeys:{Tab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection(t.getOption("indentWithTabs")?"\t":Array(t.getOption("indentUnit")+1).join(" "),"end","+input")}}},cmOptionsHTML:{tabSize:4,mode:"text/html",lineNumbers:!0,line:!0,viewportMargin:1/0,readOnly:!0},newPlot:{}}},created:function(){this.reloadPlots(),this.subscribe()},methods:{handleShow:function(t,e){"pending"!=e.status&&(this.dialogTitle=e.title,this.dialogPlot=e,this.plotKey+="1",this.dialogVisible=!0)},handleEdit:function(t,e){"pending"!=e.status&&(this.code=e.code,this.plotId=e.id,this.editDialogVisible=!0)},showTokens:function(t,e){var n=this;"pending"!=e.status&&g.a.get("/tokens/"+e.id).then(function(t){n.tokens=t.data.tokens,n.tokenDialogId=e.id,n.tokenDialogVisible=!0}).catch(function(t){return console.error(t)})},viewToken:function(t,e){this.tagCode='<plot id="'+this.tokenDialogId+'" width="970" height="400" key="'+e.token+'"></plot>',this.scriptCode='<script src="'+this.$store.getters.getSettings.hostname+'/js"><\/script>',this.embedDialogVisible=!0},issueToken:function(){var t=this;g.a.post("/tokens",{name:this.tokenNameInput,plotId:this.tokenDialogId}).then(function(e){e.data.success&&(t.tokens.push(e.data.token),t.createTokenDialogVisible=!1)}).catch(function(t){return console.error(t)})},revokeToken:function(t,e){var n=this;this.$confirm("Do you really want to revoke this token? It will no longer be possible for websites using this token to show the plot.","Revoke Token",{confirmButtonText:"Revoke",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"button-delete"}).then(function(t){"confirm"===t&&g.a.delete("/tokens",{data:{plotId:n.tokenDialogId,token:e.token}}).then(function(t){if(t.data.success){var o=n;setTimeout(function(){o.tokens=o.tokens.filter(function(t){return t.token!=e.token})},100)}else n.$message.error("Token could not be revoked")}).catch(function(t){return console.error(t)})}).catch(function(t){})},handleDelete:function(t,e){var n=this;"pending"!=e.status&&this.$confirm("Do you really want to delete this plot?","Delete Plot",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"button-delete"}).then(function(t){"confirm"===t&&g.a.delete("/plots/"+e.id).then(function(t){t.data.success?n.reloadPlots():n.$message.error("Plot could not be deleted.")})}).catch(function(t){})},openCreateDialog:function(){this.newPlot.code=this.$store.getters.getSettings.defaultCode,this.createDialogVisible=!0},subscribe:function(){var t=this;g.a.get("/subscribe").then(function(e){e.data.restarted?t.reloadPlots():console.error("Subscribe connection ended unexpectedly"),t.subscribe()}).catch(function(t){return console.error(t)})},reloadPlots:function(){var t=this;g.a.get("/plots").then(function(e){t.plots=e.data}).catch(function(e){e.response.status&&401==e.response.status&&t.deauthenticate()})},saveCode:function(){var t=this;g.a.put("/plots/"+this.plotId,{code:this.code}).then(function(e){if(e.data.success)return t.editDialogVisible=!1,void t.reloadPlots();t.$message.error("Plot could not be saved.")}).catch(function(t){return console.error(t)})},createPlot:function(){var t=this;g.a.post("/plots",{code:this.newPlot.code}).then(function(e){if(e.data.success)return t.createDialogVisible=!1,void t.reloadPlots();t.$message.error("Plot could not be created.")}).catch(function(t){return console.error(t)})}},components:{Plot:S,codemirror:E.codemirror}}),V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%","margin-top":"60px"},attrs:{data:t.plots,"empty-text":t.emptyText}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("status-indicator",t._b({},"status-indicator",t.getStatus(e.row),!1)),t._v(" "),n("span",{staticStyle:{"margin-left":"6px"}},[t._v(t._s(e.row.id))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"Title",width:"auto"}}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"Last changed",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.date))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Operations",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{style:{cursor:t.getCursor(e.row.status)},attrs:{href:"#",title:"View Plot"},on:{click:function(n){n.preventDefault(),t.handleShow(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-view icon"})]),t._v(" "),n("a",{style:{cursor:t.getCursor(e.row.status)},attrs:{href:"#",title:"Edit Plot"},on:{click:function(n){n.preventDefault(),t.handleEdit(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-edit icon"})]),t._v(" "),n("a",{style:{cursor:t.getCursor(e.row.status)},attrs:{href:"#",title:"Show Tokens"},on:{click:function(n){n.preventDefault(),t.showTokens(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-tickets icon"})]),t._v(" "),n("a",{style:{cursor:t.getCursor(e.row.status)},attrs:{href:"#",title:"Delete Plot"},on:{click:function(n){n.preventDefault(),t.handleDelete(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-delete icon"})])]}}])})],1),t._v(" "),n("div",{staticClass:"centered",staticStyle:{"margin-top":"15px"}},[n("el-button",{on:{click:function(e){t.openCreateDialog()}}},[t._v("Add new")])],1),t._v(" "),n("el-dialog",{attrs:{"custom-class":"showDialog",title:t.dialogTitle?t.dialogTitle:"Untitled Plot",visible:t.dialogVisible,width:"1000px",top:"5vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"plot-loader"}),t._v(" "),n("plot",{key:t.plotKey,attrs:{plot:t.dialogPlot}})],1),t._v(" "),n("el-dialog",{attrs:{"custom-class":"editDialog",title:"Edit Plot",visible:t.editDialogVisible,width:"80%",top:"5vh"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[n("codemirror",{attrs:{options:t.cmOptions},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveCode()}}},[t._v("Save")])],1)],1),t._v(" "),n("el-dialog",{attrs:{"custom-class":"editDialog",title:"New Plot",visible:t.createDialogVisible,width:"80%",top:"5vh"},on:{"update:visible":function(e){t.createDialogVisible=e}}},[n("codemirror",{attrs:{options:t.cmOptions},model:{value:t.newPlot.code,callback:function(e){t.$set(t.newPlot,"code",e)},expression:"newPlot.code"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.createDialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createPlot()}}},[t._v("Save")])],1)],1),t._v(" "),n("el-dialog",{attrs:{"custom-class":"tokenDialog",title:"Tokens for plot "+t.tokenDialogId,visible:t.tokenDialogVisible,width:"500px",top:"5vh"},on:{"update:visible":function(e){t.tokenDialogVisible=e}}},[t._v("\n\t\tYou currently have the following tokens issued for this plot:\n\t\t"),n("el-table",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:t.tokens,"empty-text":"No tokens created yet for this plot."}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"Name",width:"auto"}}),t._v(" "),n("el-table-column",{attrs:{label:"Operations",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:"#",title:"Embed plot using this token"},on:{click:function(n){n.preventDefault(),t.viewToken(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-share icon"})]),t._v(" "),n("a",{attrs:{href:"#",title:"Revoke Token"},on:{click:function(n){n.preventDefault(),t.revokeToken(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-delete icon"})])]}}])})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.tokenNameInput="",t.createTokenDialogVisible=!0}}},[t._v("New Token")]),t._v(" "),n("el-button",{on:{click:function(e){t.tokenDialogVisible=!1}}},[t._v("Close")])],1)],1),t._v(" "),n("el-dialog",{attrs:{"custom-class":"createTokenDialog",title:"New Token",visible:t.createTokenDialogVisible,width:"500px",top:"5vh"},on:{"update:visible":function(e){t.createTokenDialogVisible=e}}},[t._v("\n\t\tPlease choose a name which is used to identify the new token. This could be e.g. the name of the website the token will be used on for embedding the plot. Note that it is recommended to create a new token for every website where you want to embed the plot.\n\t\t"),n("el-input",{staticStyle:{"margin-top":"15px"},attrs:{placeholder:"Enter token name"},model:{value:t.tokenNameInput,callback:function(e){t.tokenNameInput=e},expression:"tokenNameInput"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",disabled:!t.tokenNameInput},on:{click:function(e){t.issueToken()}}},[t._v("Create")]),t._v(" "),n("el-button",{on:{click:function(e){t.createTokenDialogVisible=!1}}},[t._v("Cancel")])],1)],1),t._v(" "),n("el-dialog",{attrs:{"custom-class":"embedDialog",title:"Embed Plot",visible:t.embedDialogVisible,top:"5vh"},on:{"update:visible":function(e){t.embedDialogVisible=e}}},[t._v("\n\t\tYou can embed this plot via the following tag:\n\t\t"),n("codemirror",{staticStyle:{"margin-top":"7px","margin-bottom":"7px"},attrs:{options:t.cmOptionsHTML},model:{value:t.tagCode,callback:function(e){t.tagCode=e},expression:"tagCode"}}),t._v("\n\t\tNote that you have to embed the following script on each page on which you want to use a plot element:\n\t\t"),n("codemirror",{staticStyle:{"margin-top":"7px","margin-bottom":"7px"},attrs:{options:t.cmOptionsHTML},model:{value:t.scriptCode,callback:function(e){t.scriptCode=e},expression:"scriptCode"}}),t._v("\n\t\tThe script is required only once per page.\n\t\t"),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.embedDialogVisible=!1}}},[t._v("Close")])],1)],1)],1)},staticRenderFns:[]};var P=n("VU/8")(T,V,!1,function(t){n("3XOR")},"data-v-006dfb0a",null).exports,I=(n("BIRJ"),{name:"Data",mixins:[D,C,$],data:function(){return{datasets:[],vcOptions:{url:"/api/datasets"},emptyText:"No datasets found."}},created:function(){this.reloadDatasets(),this.subscribe()},methods:{subscribe:function(){var t=this;g.a.get("/subscribe").then(function(e){e.data.restarted?t.reloadDatasets():console.error("Subscribe connection ended unexpectedly"),t.subscribe()})},reloadDatasets:function(){var t=this;g.a.get("/datasets").then(function(e){t.datasets=e.data}).catch(function(e){e.response.status&&401==e.response.status&&t.deauthenticate()})},getDownloadLink:function(t){return"pending"==t.status?"#":"/api/download/"+t.name},getUploadOptions:function(t){return{url:"/api/datasets/"+t,method:"put"}},handleUpload:function(t,e,n){if(this.$Progress.finish(),this.uploading=!1,t.errorMessage)this.$message.error("File could not be uploaded: "+t.errorMessage);else{var o=JSON.parse(n.response);o.success?this.reloadDatasets():o.errmsg?this.$message.error(o.errmsg):this.$message.error("An error occured while processing the uploaded file.")}},totalProgress:function(t){this.$Progress.set(t)},handleDelete:function(t){var e=this;"pending"!=t.status&&this.$confirm("Do you really want to delete this dataset?","Delete Dataset",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"button-delete"}).then(function(n){"confirm"===n&&g.a.delete("/datasets/"+t.name).then(function(t){t.data.success?e.reloadDatasets():e.$message.error("File could not be deleted.")})}).catch(function(t){})}}}),N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%","margin-top":"60px"},attrs:{data:t.datasets,"empty-text":t.emptyText}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"Name",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("status-indicator",t._b({},"status-indicator",t.getStatus(e.row),!1)),t._v(" "),n("span",{staticStyle:{"margin-left":"6px"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"Last changed",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.date))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Operations",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{style:{cursor:t.getCursor(e.row.status)},attrs:{href:t.getDownloadLink(e.row),disabled:""}},[n("i",{staticClass:"el-icon-download icon"})]),t._v(" "),n("vue-clip",{staticStyle:{display:"inline"},attrs:{options:t.getUploadOptions(e.row.name),"on-complete":t.handleUpload}},[n("template",{slot:"clip-uploader-action"},[n("i",{staticClass:"el-icon-upload2 icon",style:{cursor:t.getCursor(e.row.status)}})])],2),t._v(" "),n("a",{style:{cursor:t.getCursor(e.row.status)},attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.handleDelete(e.row)}}},[n("i",{staticClass:"el-icon-delete icon"})])]}}])})],1),t._v(" "),n("div",{staticClass:"centered",staticStyle:{"margin-top":"15px"}},[n("vue-clip",{staticStyle:{display:"inline"},attrs:{options:t.vcOptions,"on-complete":t.handleUpload,"on-total-progress":t.totalProgress}},[n("template",{slot:"clip-uploader-action"},[n("el-button",[t._v("Add new")])],1)],2)],1)],1)},staticRenderFns:[]};var O=n("VU/8")(I,N,!1,function(t){n("zF8b")},"data-v-027293ca",null).exports,U=n("mvHQ"),R=n.n(U),F={name:"Settings",mixins:[D],data:function(){return{settings:{},oldError:!1,newError:!1,newRepError:!1,urlError:!1}},created:function(){this.loadSettings()},methods:{loadSettings:function(){var t=this;g.a.get("/settings").then(function(e){if(e.data.success)return t.settings=e.data.settings,void t.$store.commit("setSettings",JSON.parse(R()(t.settings)));console.error("Error loading settings")}).catch(function(e){console.error(e),e.response.status&&401==e.response.status&&t.deauthenticate()})},saveSettings:function(){var t=this;this.oldError=!1,this.newError=!1,this.newRepError=!1,this.urlError=!1,(this.settings.old||this.settings.new||this.settings.new_rep)&&(this.settings.old||(this.oldError=!0),this.settings.new||(this.newError=!0),this.settings.new_rep||(this.newRepError=!0),this.settings.new_rep!==this.settings.new&&(this.newRepError=!0)),/^(https?):\/\/((([a-z\d\.-]{2,})\.([a-z]{2,}))|localhost|((\d{1,3}\.){3}\d{1,3}))(:\d{2,4})?$/.test(this.settings.hostname)||(this.urlError=!0),this.oldError||this.newError||this.newRepError||this.urlError||g.a.put("/settings",{settings:this.settings}).then(function(e){if(e.data.success)return t.$store.commit("setSettings",JSON.parse(R()(t.settings))),t.$message({message:"Settings successfully saved!",type:"success"}),t.settings.old="",t.settings.new="",void(t.settings.new_rep="");t.$message.error("Settings could not be saved")})},resetSettings:function(){this.settings=JSON.parse(R()(this.$store.getters.getSettings))}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"80px"}},[n("el-form",{staticStyle:{width:"60%",margin:"0 auto"},attrs:{model:t.settings,"label-width":"180px","label-position":"left"}},[n("h4",[t._v("General Settings")]),t._v(" "),n("el-form-item",{class:{"is-error":t.urlError},attrs:{label:"Host name"}},[n("el-input",{model:{value:t.settings.hostname,callback:function(e){t.$set(t.settings,"hostname",e)},expression:"settings.hostname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Default code for new plots"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.settings.defaultCode,callback:function(e){t.$set(t.settings,"defaultCode",e)},expression:"settings.defaultCode"}})],1),t._v(" "),n("h4",[t._v("Change Password")]),t._v(" "),n("el-form-item",{class:{"is-error":t.oldError},attrs:{label:"Current Password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.settings.old,callback:function(e){t.$set(t.settings,"old",e)},expression:"settings.old"}})],1),t._v(" "),n("el-form-item",{class:{"is-error":t.newError},attrs:{label:"New Password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.settings.new,callback:function(e){t.$set(t.settings,"new",e)},expression:"settings.new"}})],1),t._v(" "),n("el-form-item",{class:{"is-error":t.newRepError},attrs:{label:"Repeat"}},[n("el-input",{attrs:{type:"password"},model:{value:t.settings.new_rep,callback:function(e){t.$set(t.settings,"new_rep",e)},expression:"settings.new_rep"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveSettings()}}},[t._v("Save")]),t._v(" "),n("el-button",{on:{click:function(e){t.resetSettings()}}},[t._v("Reset")])],1)],1)],1)},staticRenderFns:[]},L=n("VU/8")(F,z,!1,null,null,null).exports,B=n("woOf"),A={name:"Login",methods:n.n(B)()({},Object(r.b)(["authenticate","setSettings"]),{submit:function(){var t=this;if(this.loginForm.password){this.loading=!0;var e={user:this.loginForm.user,password:this.loginForm.password};g.a.post("/login",e).then(function(e){if(console.log(e),e.data.success)return t.isError=!1,t.authenticate(e.data.user),t.setSettings(e.data.settings),void t.$router.push("/");t.loading=!1,t.isError=!0,t.$nextTick(function(){return t.$refs.password.focus()})})}else this.isError=!0}}),created:function(){var t=this,e=this.$store.getters.getLastUsername;e?(this.loginForm.user=e,this.$nextTick(function(){return t.$refs.password.focus()})):this.$nextTick(function(){return t.$refs.user.focus()})},data:function(){return{loading:!1,remember:!0,isError:!1,loginForm:{}}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{staticClass:"login-container",attrs:{model:t.loginForm,"label-position":"left","label-width":"0px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submit()}}},[n("h3",{staticClass:"login-title"},[t._v("BokehHub")]),t._v(" "),n("el-form-item",{attrs:{prop:"user"}},[n("el-input",{ref:"user",attrs:{type:"text","auto-complete":"off",placeholder:"Username"},model:{value:t.loginForm.user,callback:function(e){t.$set(t.loginForm,"user",e)},expression:"loginForm.user"}})],1),t._v(" "),n("el-form-item",{class:{"is-error":t.isError},attrs:{prop:"password"}},[n("el-input",{ref:"password",attrs:{type:"password","auto-complete":"off",placeholder:"Password"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){e.preventDefault(),t.submit()}}},[t._v("Login")])],1)],1)},staticRenderFns:[]};var M=n("VU/8")(A,H,!1,function(t){n("mwcI")},"data-v-50e89b26",null).exports;o.default.use(a.a);var W=new a.a({routes:[{path:"/login",name:"Login",component:M,beforeEnter:function(t,e,n){return h.getters.isAuth?n("/"):n()}},{path:"/",name:"Layout",component:k,redirect:"/plots",children:[{path:"/plots",name:"Plots",component:P},{path:"/data",name:"Data",component:O},{path:"/settings",name:"Settings",component:L,beforeEnter:function(t,e,n){return h.getters.isAdmin?n():n("/")}}],beforeEnter:function(t,e,n){return h.getters.isAuth?n():n("/login")}},{path:"*",redirect:"/"}]}),j=n("zL8q"),J=n.n(j),K=n("D4uH"),Y=n("odLt"),q=n("qJAx"),X=n.n(q),G=n("zYko"),Z=n.n(G);n("tvR6"),n("sfy8"),n("VHgu");o.default.config.productionTip=!1,o.default.use(J.a,{size:"medium"}),o.default.use(X.a),o.default.use(Z.a,{color:"rgb(143, 255, 199)",failedColor:"red",height:"2px"}),o.default.component("icon",K.a),o.default.component("status-indicator",Y.a),g.a.defaults.baseURL="/api/",g.a.get("/csrf").then(function(t){console.log(t.data.token),g.a.defaults.headers.common={"X-CSRF-TOKEN":t.data.token}}),new o.default({el:"#app",router:W,store:h,components:{App:s},template:"<App/>"})},VHgu:function(t,e){},Xk2m:function(t,e){},cIBW:function(t,e){},jSVj:function(t,e){},kcWO:function(t,e){},mwcI:function(t,e){},sfy8:function(t,e){},tvR6:function(t,e){},zF8b:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b1b34ebba29f896f030a.js.map